<!DOCTYPE html>
<html lang="en-us">
<head>
   <link rel="stylesheet" href="./css/Join.css">
   <meta charset="UTF-8">
   <title>pyromasters-mp - Join.html</title>
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
   <img src="assets/images/title.png">
   
   <h1 style="font-family: initial;">JOIN A GAME</h1>
   
   <input style="height: 30px;" id="username" name="username" autocomplete="off" placeholder="Username">
   <br>
   <input style="height: 30px;" id="room" name="room" autocomplete="off" placeholder="Room">
   <br>

   <script>
      function getUsername() {
         return document.querySelector('#username').value;
      }
      function getRoom() {
         return document.querySelector('#room').value;
      }

      const params = new URLSearchParams(window.location.search);
      const device = params.get('device');
   </script>
   
   <button onclick="
      username = getUsername();
      room = getRoom();
      if (!username || !room) {
         document.body.innerHTML += '<br>please put something ...';
      } else if (username.length > 15 || room.length > 15) {
         document.body.innerHTML += '<br> max 15 characters :(';
      } else if (! /^[ -~]{1,15}$/.test(username) || ! /^[ -~]{1,15}$/.test(room)) {
         document.body.innerHTML += '<br>please use printable ascii characters ðŸ¦†ðŸ¦†';
      }  else {
         document.location.href = `Game${device==='mobile' ? 'Mobile' : 'PC'}.html?username=${encodeURIComponent(username)}&room=${encodeURIComponent(room)}`;
      }
   ">PLAY</button>

   <%- footer %>
</body>
</html>